@model IEnumerable<SIREON.Cubiculo>

@{
    ViewBag.Title = "Disponibilidad | SIREON";
}


<body>
<div class="grid">
    <div class="grid-body">
        <h2 class="grid-title">Acciones</h2>
        <div class="item-wrapper">
            <a href="@Url.Action("Create", "Reservaciones")" class="btn btn-success has-icon"><i class="mdi mdi-calendar-plus"></i>Nueva reservación</a>
        </div>
    </div>
</div>
<br />
<div class="row">
    @{
        foreach (var item in Model)
        {
            if (item.Estatus == "Libre     ")
            {
                <div class="col-lg-3 col-md-3 col-sm-3 equel-grid" style="text-align:center">
                    <div class="col-md-3 col-sm-3 grid">
                        <div class="grid-body">
                            <h1 class="grid-title">
                                Cubículo  @Html.DisplayFor(modelItem => item.Descripcion)
                            </h1>
                            <a href="@Url.Action("edit", "Cubiculos", new { id=item.ID_Cubiculo })">
                                <div class="item-wrapper">
                                    <img class="img-xl mt-1 mb-1 mr-2" src="~/Content/images/Disponible.jpg" alt="" width="100">
                                </div>
                            </a>
                            <p>
                                Capacidad: @Html.DisplayFor(modelItem => item.Capacidad) Personas
                            </p>
                            <p>
                                Estado: @Html.DisplayFor(modelItem => item.Estatus)
                            </p>
                        </div>
                    </div>
                </div>
            }
            else if (item.Estatus == "Ocupado   ")
            {
                <div class="col-lg-3 col-md-3 col-sm-3 equel-grid" style="text-align:center">
                    <div class="col-md-3 col-sm-3 grid">
                        <div class="grid-body">
                            <h1 class="grid-title">
                                Cubículo  @Html.DisplayFor(modelItem => item.Descripcion)
                            </h1>
                            <a href="@Url.Action("edit", "Cubiculos", new { id=item.ID_Cubiculo })">
                                <div class="item-wrapper">
                                    <img class="img-xl mt-1 mb-1 mr-2" src="~/Content/images/EnUso.jpg" alt="" width="100">
                                </div>
                            </a>
                            <p>
                                Personas dentro: @Html.DisplayFor(modelItem => item.Capacidad)
                            </p>
                            <p>
                                Hora de salida: 14:00
                            </p>
                        </div>
                    </div>
                </div>
            }
            else
            {
                <div class="col-lg-3 col-md-3 col-sm-3 equel-grid" style="text-align:center">
                    <div class="col-md-3 col-sm-3 grid">
                        <div class="grid-body">
                            <h1 class="grid-title">
                                Cubículo  @Html.DisplayFor(modelItem => item.Descripcion)
                            </h1>
                            <a href="@Url.Action("edit", "Cubiculos", new { id=item.ID_Cubiculo })">
                                <div class="item-wrapper">
                                    <img class="img-xl mt-1 mb-1 mr-2" src="~/Content/images/Reservado.jpg" alt="" width="100">
                                </div>
                            </a>
                            <p>
                                Capacidad: @Html.DisplayFor(modelItem => item.Capacidad) Personas
                            </p>
                            <p>
                                Estado: @Html.DisplayFor(modelItem => item.Estatus)
                            </p>
                        </div>
                    </div>
                </div>

            }
        }
    }
</div>

@*<div class="row" id="prueba">
    <input type="time" class="form-control" id="Horaentrada" min="08:00" max="20:30" step="900" placeholder="HH:MM" value="10:00:00" required>

    <button class="btn btn-success" id="Consultar">Consultar disponibilidad</button>
</div>*@
</body>
<br />



<script>


    //After Click Save Button Pass All Data View To Controller For Save Database
    function Consultar(data) {
            return $.ajax({

                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                type: 'POST',
                url: "/Cubiculos/Disponibilidad",
                data: data,
                success: function (Busc) {
                    alert(Busc);
                    $('#prueba').append('<div><div class="form-row align-items-center justify-content-between" ><div class="col-lg-3 col-md-3 col-sm-3 my-1"><select class="custom-select my-1 mr-sm-2" id="Invitado1"><option value="1" selected>Estudiante/Profesor</option><option value="2">Invitado</option></select></div><div class="col-lg-3 col-md-3 col-sm-3 my-1"><label class="sr-only" for="inlineFormInputName">Name</label><input type="text" class="form-control" id="inlineFormInputName" placeholder="Gabriela Marte" readonly></div><div class="col-lg-3 col-md-3 col-sm-3 my-1"><label class="sr-only" for="inlineFormInputGroupUsername">Usuario</label><div class="input-group"><div class="input-group-prepend"><img src="~/Content/images/at.png" alt="Matricula" width="33" /></div><input type="text" class="form-control" placeholder="gm20-0469" id="Usuario"></div></div><div class="col-auto my-1"><button onclick="Consultar()" class="btn btn-primary" id="btnConsultar">Consultar</button><button onclick="EliminarIntegrate()" class="btn btn-primary"  style="background-color:darkred" id="btn2">Eliminar</button></div></div></div>');


                },
                error: function () {
                    alert("Error! Verificar datos")
                }
            });
    }


    ////Collect Multiple Order List For Pass To Controller
    $("#Consultar").one('click', function (e) {
            e.preventDefault();

            if ($.trim($("#Horaentrada").val()) == "") return;

            var data = JSON.stringify({
                HEntrada: $("#Horaentrada").val(),

            });

            console.log(data);

            $.when(Consultar(data)).then(function (response) {
                console.log(response);
            }).fail(function (err) {
                console.log(err);
            });
    });




</script>